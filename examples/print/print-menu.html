

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Spark Sample Application - My Drive</title>

	<!-- Bootstrap core CSS -->
	<link href="../../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom styles -->
	<link href="../../assets/css/styleOld.css" rel="stylesheet">
	<link href="../../assets/css/common.css" rel="stylesheet">

	<script type="text/javascript" charset="utf-8" src="../../assets/scripts/config.js"></script>
	<script type="text/javascript" charset="utf-8" src="../../vendor/spark/spark-config.js"></script>
	<script type="text/javascript" charset="utf-8" src="../../vendor/spark/spark-auth.js"></script>

	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="../../vendor/bootstrap/js/bootstrap.min.js"></script>
</head>

<body>

<div class="logged-in-container">
	<div class="container">

		<div class="header">
			<!-- Navigation links at the top right of the screen -->
			<ul class="nav nav-pills pull-right" role="tablist">

				<li role="presentation">
					<a href="plugins/simulator/print_simulator.html" target="_blank" id="printer-simulator" class="btn btn-primary btn-large">
						Printer Simulator
					</a>
				</li>
				<li role="presentation" id="user">
					<span><!-- user --></span>
					<img src=""/>
				</li>
				<li role="presentation" id="logout"><a href="#" onclick="spark.auth.logout()">Logout</a></li>
			</ul>
			<h3 class="text-muted"><a href="index.html">Spark Sample App</a></h3>
		</div>


		<ul class="nav nav-tabs" role="tablist">
			<!--
			<li>
				<a href="register-printer.html" target="mainIframe" role="tab" >
					Register Printer
				</a>
			</li>
			<li><a href="create-print-job.html" target="mainIframe" role="tab" >
				Print Job
			</a>
			</li>
			<li>
				<a href="printer-status.html" target="mainIframe" role="tab">
					Check Status
				</a>
			</li>
			-->

			<li>
				<a id="registerId" onclick="statePlugin.changeState('register')" role="tab" >
					Register Printer
				</a>
			</li>
			<li><a id="printId" onclick="statePlugin.changeState('print')" role="tab" >
				Print Job
			</a>
			</li>
			<li>
				<a  id="statusId" onclick="statePlugin.changeState('status')" role="tab">
					Check Status
				</a>
			</li>
<!--
			<li>
				<a onclick="$('#fakeIframe').load('register-printer.html?aaaa=bbb')" role="tab">

					Register Printer
				</a>
			</li>
			<li>
				<a onclick="$('#fakeIframe').load('create-print-job.html')" role="tab">

					Print Job
				</a>
			</li>
			<li>
				<a onclick="$('#fakeIframe').load('printer-status.html')" role="tab">

					Check Status
				</a>
			</li>
			-->
		</ul>

		<iframe name="mainIframe" id="mainIframe" style="width: 100%;border: 0;height: 60%;" src="register-printer.html"></iframe>


	</div>
	<div class="footer"></div>

</div>

<!-- /container -->

<script type="text/javascript" charset="utf-8" src="../../vendor/spark/utilities.js"></script>
<script type="text/javascript" charset="utf-8" src="../../vendor/spark/spark-printer.js"></script>

<!--script type="text/javascript" charset="utf-8" src="../../plugins/login/login.js"></script-->

<script type="text/javascript" charset="utf-8" src="../../plugins/ajaxlogger/renderjson.js"></script>
<script type="text/javascript" charset="utf-8" src="../../plugins/ajaxlogger/ajaxCallLogger.js"></script>

<script type="text/javascript" charset="utf-8" src="../../plugins/state/statePlugin.js"></script>



<script>
	$(document).ready(function(){
		ajaxCallLogger.createLoggerElement(".footer");
		ajaxCallLogger.startIframeListener();
		statePlugin.startIframeStateListener();
	});

	if (spark.auth.isAccessTokenValid()) {
		spark.auth.getMyProfile(function (response) {
			$('#user span').text(response.member.screen_name);
			$('#user img').attr('src', response.member.profile.avatar_path);
		});
	}


	var states = {

		login:{
			"src":"plugins/simulator/print_simulator.html",
			enabledTabs:[],
			disabledTabs:["#printId","#registerId","#statusId"]
		},

		register:{
			"src":"register-printer.html",
			enabledTabs:["#registerId"],
			disabledTabs:["#printId","#statusId"]
		},

		print:{
			"src":"create-print-job.html",
			enabledTabs:["#registerId","#printId"],
			disabledTabs:["#statusId"]
		},

		status:{
			"src":"printer-status.html",
			enabledTabs:["#printId","#registerId","#statusId"],
			disabledTabs:[]
		}

	};




</script>





</body>
</html>
